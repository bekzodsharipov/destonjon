document.addEventListener("DOMContentLoaded", (function () { const e = async e => { try { const t = await fetch("https://user-action-tracker.asosit.uz/events", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ type: e, site_name: "Asosiy" }) }); if (!t.ok) throw new Error("Serverdan xatolik keldi: " + t.status); const n = await t.json(); console.log("Yuborilgan javob:", n) } catch (e) { console.error("Xatolik:", e) } }; e("Saytga kirdi"); const t = document.querySelectorAll(".registerBtn"), n = document.getElementById("registrationModal"), l = document.getElementById("closeModalBtn"), o = document.querySelector(".homeModalOverlay"), i = document.getElementById("registrationForm"), a = document.getElementById("phone"), d = document.getElementById("phoneError"), c = document.getElementById("submitBtn"), r = document.getElementById("selectedCountry"), s = document.getElementById("selectedCountryCode"), h = document.getElementById("countryDropdown"), u = document.getElementById("dropdownIcon"), m = [{ name: "Uzbekistan", code: "+998" }, { name: "AQSH", code: "+1" }, { name: "Janubiy Koreya", code: "+82" }, { name: "Qirg’iziston", code: "+996" }, { name: "Qozog’iston", code: "+7" }, { name: "Tojikiston", code: "+992" }, { name: "Turkmaniston", code: "+993" }, { name: "Polsha", code: "+48" }], g = { "+998": { placeholder: "88 888 88 88", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(2, e.length))), e.length > 2 && (t += " " + e.slice(2, Math.min(5, e.length))), e.length > 5 && (t += " " + e.slice(5, Math.min(7, e.length))), e.length > 7 && (t += " " + e.slice(7, Math.min(9, e.length))), t }, validate: function (e) { return /^\d{2} \d{3} \d{2} \d{2}$/.test(e) } }, "+1": { placeholder: "555 123 4567", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(3, e.length))), e.length > 3 && (t += " " + e.slice(3, Math.min(6, e.length))), e.length > 6 && (t += " " + e.slice(6, Math.min(10, e.length))), t }, validate: function (e) { return /^\d{3} \d{3} \d{4}$/.test(e) } }, "+82": { placeholder: "10 1234 5678", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(2, e.length))), e.length > 2 && (t += " " + e.slice(2, Math.min(6, e.length))), e.length > 6 && (t += " " + e.slice(6, Math.min(10, e.length))), t }, validate: function (e) { return /^\d{2} \d{4} \d{4}$/.test(e) } }, "+996": { placeholder: "555 123 456", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(3, e.length))), e.length > 3 && (t += " " + e.slice(3, Math.min(6, e.length))), e.length > 6 && (t += " " + e.slice(6, Math.min(9, e.length))), t }, validate: function (e) { return /^\d{3} \d{3} \d{3}$/.test(e) } }, "+7": { placeholder: "700 123 4567", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(3, e.length))), e.length > 3 && (t += " " + e.slice(3, Math.min(6, e.length))), e.length > 6 && (t += " " + e.slice(6, Math.min(10, e.length))), t }, validate: function (e) { return /^\d{3} \d{3} \d{4}$/.test(e) } }, "+992": { placeholder: "55 555 5555", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(2, e.length))), e.length > 2 && (t += " " + e.slice(2, Math.min(5, e.length))), e.length > 5 && (t += " " + e.slice(5, Math.min(9, e.length))), t }, validate: function (e) { return /^\d{2} \d{3} \d{4}$/.test(e) } }, "+993": { placeholder: "6 123 4567", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(1, e.length))), e.length > 1 && (t += " " + e.slice(1, Math.min(4, e.length))), e.length > 4 && (t += " " + e.slice(4, Math.min(8, e.length))), t }, validate: function (e) { return /^\d{1} \d{3} \d{4}$/.test(e) } }, "+48": { placeholder: "123 456 789", format: function (e) { let t = ""; return e.length > 0 && (t += e.slice(0, Math.min(3, e.length))), e.length > 3 && (t += " " + e.slice(3, Math.min(6, e.length))), e.length > 6 && (t += " " + e.slice(6, Math.min(9, e.length))), t }, validate: function (e) { return /^\d{3} \d{3} \d{3}$/.test(e) } } }; let y = "+998"; function p() { n.style.display = "none", document.body.style.overflowY = "scroll" } r.addEventListener("click", (function () { "block" === h.style.display ? (h.style.display = "none", u.innerHTML = '<polyline points="6 9 12 15 18 9"></polyline>') : (h.innerHTML = "", m.forEach((e => { const t = document.createElement("div"); t.className = "country-option", e.code === y && t.classList.add("selected"), t.innerHTML = `\n        <span>${e.name}</span>\n        <span class="country-code">${e.code}</span>\n        ${e.code === y ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>' : ""}\n      `, t.addEventListener("click", (function () { y = e.code, s.textContent = e.code, h.style.display = "none"; const t = g[e.code] || g["+998"]; a.placeholder = t.placeholder, a.value = "", d.style.display = "none", u.innerHTML = '<polyline points="6 9 12 15 18 9"></polyline>' })), h.appendChild(t) })), h.style.display = "block", u.innerHTML = '<polyline points="18 15 12 9 6 15"></polyline>') })), document.addEventListener("click", (function (e) { r.contains(e.target) || h.contains(e.target) || (h.style.display = "none", u.innerHTML = '<polyline points="6 9 12 15 18 9"></polyline>') })), a.addEventListener("input", (function (e) { const t = function (e, t) { const n = e.replace(/\D/g, ""); return (g[t] || g["+998"]).format(n) }(e.target.value, y); a.value = t, d.style.display = "none" })), t.forEach((t => { t.addEventListener("click", (function () { e("Tugmani bosdi"), n.style.display = "block", document.body.style.overflowY = "hidden" })) })), l.addEventListener("click", p), o.addEventListener("click", p), i.addEventListener("submit", (function (e) { e.preventDefault(); const t = a.value; if (!(g[y] || g["+998"]).validate(t)) return void (d.style.display = "block"); d.style.display = "none", c.textContent = "YUBORILMOQDA...", c.disabled = !0; const n = new Date, l = n.toLocaleDateString("uz-UZ"), o = n.toLocaleTimeString("uz-UZ"), i = { TelefonRaqam: `${y} ${a.value}`, SanaSoat: `${l} - ${o}` }; localStorage.setItem("formData", JSON.stringify(i)), window.location.href = "/thankYou.html", c.textContent = "DAVOM ETISH", c.disabled = !1, a.value = "", p() })) })); let totalSeconds = 120; const timerElement = document.getElementById("timer"), countdown = setInterval((() => { if (totalSeconds <= 0) return clearInterval(countdown); totalSeconds--; let e = Math.floor(totalSeconds / 60), t = totalSeconds % 60, n = e.toString().padStart(1, "0"), l = t.toString().padStart(2, "0"); timerElement.textContent = `${n}:${l}` }), 1e3);